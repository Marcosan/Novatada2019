webpackJsonp([7,135],{"9bGG":function(e,t,n){"use strict";t.a=C;var r=n("d6ZO"),o=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=32,b=100,h=null,y=!1,g=[],_=function e(){h&&clearTimeout(h),y=!0,h=setTimeout(function(){y=!1},b)},E=function e(t){0===g.length&&window.addEventListener("scroll",_),g.push(t)},w=function e(t){var n=g.indexOf(t);g.splice(n,1),0===g.length&&window.removeEventListener("scroll",_)};function C(t){return function(e){function a(){var e,t;i(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(p(p(t=l(this,(e=u(a)).call.apply(e,[this].concat(r))))),"state",{isHovering:!1}),m(p(p(t)),"handlers",{onMouseOver:function e(){return t._setHover(!0)},onMouseLeave:function e(){return t._setHover(!1)}}),t}return d(a,e),s(a,[{key:"componentDidMount",value:function e(){E(this)}},{key:"componentWillUnmount",value:function e(){this.hoverTimer&&clearTimeout(this.hoverTimer),w(this)}},{key:"_setHover",value:function e(t){var n=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=t&&y?setTimeout(function(){return n._setHover(t)},b):setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},v)}},{key:"render",value:function e(){return r.createElement(t,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}]),a}(r.Component)}},Hdz3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var r=n("d6ZO"),o=n.n(r),a=n("lVil"),i=n("dZgC"),c=n("6oz1");function s(e){var r=e.onDismiss;return o.a.createElement("div",{className:"NewsConversationsDropdown"},o.a.createElement("div",{className:"content"},o.a.createElement(i.b,null,function(n){return o.a.createElement(c.b,{name:"web_contact_requests_inbox"},function(e){var t=e.anyEnabled;return o.a.createElement(a.a,{requestContext:n,onDismiss:r,inContactRequestsInboxExperiment:t})})})))}},PrM5:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=f;var o="facebook",a="twitter",i="google",c="youtube",s="gplus",l="microsoft",u="etsy",d="instagram";function f(e){var t;return r(t={},o,{connected:e.connected_to_facebook||!1}),r(t,i,{connected:e.connected_to_google||!1}),r(t,c,{connected:e.connected_to_youtube||!1}),r(t,s,{connected:!!e.gplus_url,url:e.gplus_url}),r(t,l,{connected:e.connected_to_microsoft||!1}),r(t,a,{connected:!!e.twitter_url,url:e.twitter_url}),r(t,u,{connected:e.connected_to_etsy||!1}),r(t,d,{connected:e.connected_to_instagram||!1}),t}},Svvu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("hlP+"),o=n.n(r),s=n("BVzu"),a=n("XZ9g"),l=n.n(a),i=n("/4D9"),u=n.n(i),d=n("W/Cr"),f=n("DLm7"),p=n("EAiy"),c;function m(){}Object.assign(m.prototype,o.a),Object.assign(m.prototype,{connect:function e(a,i){var c=this;(i=Object.assign({},{success:function e(){},error:function e(){},complete:function e(){}},i)).rerequest_facebook_email?u()().then(function(e){var t;e.default.ensureInit(function(e){e.login(function(e){var t=e.authResponse,n,r;t&&(n=(n=t.grantedScopes)?n.split(","):[],r=t.userID);var o=n.find(function(e){return"email"===e}),a={id:r};"connected"===e.status&&o?i.success(a):i.error(a),i.complete()},{scope:"email",auth_type:"rerequest",return_scopes:!0})},p.a)}):l()().then(function(e){var t,n=e.default.getWindowOptions(),r=window.open("/connect/"+a+"/","",n);if(!r)return s.default.showError(d.a._("You must enable popups!")),void i.error({network:a,alertedUpstream:!0});var o=f.a.setInterval(function(){r.closed&&(clearInterval(o),c.handleComplete({network:a,error_message:"Window closed."}))},1e3);c.once("connect:"+a,function(e){clearInterval(o),e.error_message?i.error(e):i.success(e),i.complete()})})},complete:function e(t){this.handleComplete(t)},handleComplete:function e(t){var n="connect:"+t.network,r;if("facebook"===t.network){var o=t.id;o&&"string"!=typeof o&&(t.error_message="Facebook id must be of string type")}this.trigger(n,t)}}),Object.assign(m,{instance:function e(){return c||(c=new m),c},FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",YOUTUBE:"youtube",GPLUS:"gplus",MICROSOFT:"microsoft",ETSY:"etsy"}),window.addEventListener("message",function(e){var t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");e.origin===t&&"social-connect-complete"===e.data.type&&m.instance().complete(e.data)}),t.default=m},T0l7:function(e,t,n){"use strict";t.c=i,t.d=c,t.a=u,t.b=d;var o=n("/e0Y"),s=n("Cjb7"),r=n("THYI"),l=n.n(r),a="collaborator_approve_invite";function i(e,t){return l.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function c(e,t){return l.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function u(n,r){return function(e){var t;return l.a.create("BoardInviteResource",{board_id:n,invited_user_id:r}).callUpdate().then(function(){o.a.trackEvent(a,"success"),s.a.instance.publish(n,"boardApprovedCollaboratorInvite",{userId:r})}).catch(function(){return o.a.trackEvent(a,"error")})}}function d(a,i,c){return function(e){var t=a.invited_user,n=a.status,r=a.board.id,o;return l.a.create("accepted"===n?"BoardCollaboratorResource":"BoardInviteResource",{ban:c,board_id:r,field_set_key:"boardEdit",invited_user_id:t.id}).callDelete({showError:!1}).then(function(){s.a.instance.publish(r,"boardWriteAccessUpdated"),c&&s.a.instance.publish(r,"boardBannedCollaborator"),i&&(s.a.instance.publish("currentUser","boardRemovedCollaboratorSelf"),s.a.instance.publish(r,"boardRemovedCollaboratorSelf"))})}}},U7FU:function(e,t,n){"use strict";var r=n("d6ZO"),i=n.n(r),o=n("DUIN"),a=n("GGB8"),c=n.n(a),s=n("IaRT"),l=n.n(s),u=n("gEaE");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=3,w=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],C=function e(t,n){var r=t.name,o=t.image_thumbnail_url;return i.a.createElement("div",{className:c()("Image","Module","boardMessageRep",n)},i.a.createElement("img",{alt:r,src:o}))},O=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length?arguments[2]:void 0,o=3<arguments.length?arguments[3]:void 0,a={small:"sm",medium:"md",normal:"lg"};return i.a.createElement(u.b,{display:"flex",alignItems:"center"},i.a.createElement(u.l,{collaborators:r.map(function(e,t){return{name:e.full_name||e.email||e.username||"user ".concat(t),src:e.is_default_image?void 0:e.image_large_url||e.image_medium_url}}),size:a[t]}))},k=function(e){function t(){return f(this,t),v(this,h(t).apply(this,arguments))}return y(t,e),m(t,[{key:"getUsersToShow",value:function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=this.props.viewerId;return void 0!==r&&(n=n.filter(function(e){return e.id!==r})),n.concat(t.map(function(e){return{full_name:e,first_name:e,username:e}})).slice(0,3)}},{key:"render",value:function e(){var t=this.props,n=t.board,r=t.emails,o=t.shouldLink,a=t.size,i=t.users,c=this.getUsersToShow(r,i),s=c.length<=3?w[c.length-1]:[];return n?C(n,a):0<c.length?O(a,s,c,o):null}}]),t}(r.Component);function I(e){var t=e.viewer;return{viewerId:t.isAuth?t.id:null}}_(k,"defaultProps",{shouldLink:!1,size:"medium"}),t.a=Object(o.connect)(I)(k)},XSNT:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("d6ZO"),o=n.n(r),a=n("IaRT"),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function r(e,t){var n;return s(this,r),b(v(v(n=d(this,f(r).call(this,e,t)))),"handleChange",function(e){n.props.onChange&&n.props.onChange(e.target.value),n.setState({value:e.target.value,hasChanged:!0})}),n.state={isFocused:n.props.focused||!1,value:n.props.value,hasChanged:void 0!==n.props.value},n}return p(r,e),u(r,[{key:"componentDidMount",value:function e(){this.state.isFocused&&this._input.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.setState({value:t.value})}},{key:"getId",value:function e(){return this.props.id}},{key:"getValue",value:function e(){return this.state.value}},{key:"focus",value:function e(){this._input.focus()}},{key:"render",value:function e(){var n=this;return o.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function e(t){n._input=t},style:this.props.style,type:this.props.type,value:this.state.value||""})}}]),r}(r.Component);h.defaultProps={type:"text"}},XZ9g:function(e,t,n){e.exports=function(){return new Promise(function(t){n.e(219).then(function(e){t(n("ZIw6"))}.bind(null,n)).catch(n.oe)})}},cD7N:function(e,t,n){"use strict";var a=n("Cjb7"),r=n("THYI"),c=n.n(r),o=n("Svvu"),s=n("DLm7"),i=n("EAiy"),l=1e3,u=110;function d(){}Object.assign(d.prototype,{handleConnect:function e(n,r,o){if(r&&!i.a.isLimitedLogin()){var t={success:function(e){var t={network:n,data:e};this._internalConnectNetwork(r,t,o)}.bind(this),error:function e(t){o.error&&o.error(t)},complete:function e(){o.complete&&o.complete()}};this._externalConnectNetwork(n,r,t)}else{var a={network:n};this._internalConnectNetwork(r,a,o)}},updateConnectStatus:function e(){var t;c.a.create("UserResource",{user_id:i.a.get("id"),username:i.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;i.a.set(t),a.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,r){n?o.default.instance().connect(t,r):r.success&&r.success({})},_internalConnectNetwork:function e(t,n,r){var o=this,a=c.a.create("UserSocialNetworkResource",n);(t?a.callCreate():a.callDelete()).then(function(e){o.updateConnectStatus(),r.success&&r.success(e)},function(e){r.error&&e instanceof Object&&r.error(e)}).finally(function(){r.complete&&r.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case o.default.FACEBOOK:n="UserFacebookFriendsResource";break;case o.default.TWITTER:n="UserTwitterFriendsResource";break;case o.default.GOOGLE:n="UserGmailFriendsResource";break;case o.default.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,r){var o={resource:n,network:t,error:r};a.a.instance.publish("site","friendImportCompleted",o)},pollForFriends:function e(n,r){var o=this,t=(r=r||{}).resourceOptions||{},a=this._getResourceNameForNetworkFriends(n);if(a){var i=c.a.create(a,t);i.callGet({showError:!1}).then(function(){var e=r.success;e&&e(i),o._handleFriendsImported(n,i,null)},function(e){if(e.api_error_code===u)s.a.setTimeout(function(){o.pollForFriends(n,r)},l);else{var t=r.error;t&&t(),o._handleFriendsImported(n,i,e)}})}}});var f=null;d.instance=function(){return f||(f=new d),f},t.a=d},cy6F:function(e,t,n){"use strict";t.a=c;var r=n("d6ZO"),o=n.n(r),a=n("IaRT"),i=n.n(a);function c(e){var t=e.mask,n=e.loading,r=e.size;return o.a.createElement("div",null,t&&o.a.createElement("div",{className:"moduleMask",style:{bottom:0,left:0,right:0,top:0}}),n&&o.a.createElement("div",{className:"Spinner"},o.a.createElement("div",{className:"small"===r?"spinnerSmall":"spinnerMedium"})))}c.defaultProps={loading:!0,mask:!0,size:"medium"}},fvzG:function(e,t,n){"use strict";t.h=o,t.e=a,t.g=i,t.b=c,t.c=v,t.d=s,t.f=l,t.a=u,t.k=b,t.j=h,t.i=f;var r=n("THYI"),m=n.n(r);function o(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function a(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function i(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function c(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function v(e){return{type:"CONVERSATION_CREATE",payload:e}}function s(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function l(e,t){return{type:"CONVERSATION_MESSAGES_UPDATE",payload:{conversationId:e,messages:t}}}function u(){return function(e){var t;m.a.create("ConversationBadgeResource",{}).callDelete({showError:!1}),e({type:"CONVERSATION_BADGE_RESET"})}}function b(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function h(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}var y=(d=0,function(){return d++}),d;function f(d,f,p){var e,t=new Promise(function(u){(e=function e(n,t){var r=f.text,o=f.pinId,a=f.boardId,i=f.userId,c=f.didItId,s=t();function l(){var e=m.a.create("ConversationMessagesResource",{conversation_id:d,text:r,pin:o,board:a,user:i,user_did_it_data:c,source:p}),t="".concat(y());e.callCreate().then(function(e){n(h(d,t,e.resource_response.data.id))}),n(b(d,{text:r,sender:s.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:t,board:null,event_type:null,pin:o?s.pins[o]:null,type:"message",user_did_it_data:null,user:null})),u()}s.conversations.data[d]?l():m.a.create("ConversationResource",{conversation_id:d}).callGet().then(function(e){var t=e&&e.resource_response&&e.resource_response.data;n(v(t)),l()})}).getPromise=function(){return t}});return e}},lVil:function(e,t,n){"use strict";var l=n("d6ZO"),p=n.n(l),r=n("DUIN"),f=n("5tOk"),m=n("W/Cr"),o=n("THYI"),u=n.n(o),c=n("fvzG"),v=n("gEaE");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function b(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?_(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function a(){var e,r;i(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return E(_(_(r=b(this,(e=h(a)).call.apply(e,[this].concat(n))))),"state",{contactRequestCompleted:!1,isAccepted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),E(_(_(r)),"handleInviteAcceptResponse",function(){var e;r.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),u.a.create("ContactRequestAcceptResource",{contact_request:r.props}).callUpdate().then(function(e){var t=r.props.dispatch;if(r.setState({isAccepted:!0,contactRequestCompleted:!0,isAcceptButtonLoading:!1}),e&&e.resource_response.data){var n=e.resource_response.data;t(Object(c.c)(n)),t(Object(c.h)(n.id)),t(Object(c.g)(n.id))}})}),E(_(_(r)),"handleInviteDeclineResponse",function(){var e;r.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),u.a.create("ContactRequestIgnoreResource",{contact_request:r.props}).callDelete().then(function(){r.setState({isAccepted:!1,contactRequestCompleted:!0,isIgnoreButtonLoading:!1})})}),r}return y(a,e),d(a,[{key:"renderRequestText",value:function e(t,n,r){if(t){var o=t.name,a=t.url;if(o&&a)return f.h(m.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:o.toString(),boardUrl:a.toString(),senderName:n,senderUsername:r})}return f.h(m.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:r})}},{key:"renderAcceptedBoard",value:function e(){var t=this.props.board;if(!t)return null;var n=t.name,r=t.url,o=t.image_thumbnail_url;return p.a.createElement(v.t,{href:r},p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex"},p.a.createElement(v.u,{shape:"rounded",width:50,height:50},p.a.createElement(v.p,{alt:n,src:o,naturalHeight:60,naturalWidth:60})),p.a.createElement(v.b,{paddingX:3,flex:"grow",display:"flex",direction:"column",justifyContent:"center"},p.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},n),p.a.createElement(v.K,{color:"darkGray",size:"sm"},m.a._("You joined this board","Status message for a group board the user has joined.")))))}},{key:"render",value:function e(){var t=this.props,n=t.board,r=t.sender,o=this.state,a=o.contactRequestCompleted,i=o.isAccepted,c=o.isAcceptButtonLoading,s=o.isIgnoreButtonLoading;if(a)return n&&i?this.renderAcceptedBoard():null;var l=r.image_large_url,u=r.full_name,d=r.username;return p.a.createElement(v.b,{paddingX:2,paddingY:4,display:"flex"},p.a.createElement(v.b,{height:40,width:40,flex:"none"},p.a.createElement(v.t,{href:"/"+d+"/"},p.a.createElement(v.a,{name:d,src:l}))),p.a.createElement(v.b,{paddingX:3,flex:"grow"},p.a.createElement(v.b,{marginBottom:3},p.a.createElement(v.K,null,p.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(n,u,d)}}))),p.a.createElement(v.b,{display:"flex",marginLeft:-1,marginRight:-1},p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{disabled:s,onClick:this.handleInviteDeclineResponse,size:"sm",text:m.a._("Decline","ignore contact request")})),p.a.createElement(v.b,{paddingX:1,flex:"grow"},p.a.createElement(v.c,{color:"red",disabled:c,onClick:this.handleInviteAcceptResponse,size:"sm",text:m.a._("Accept","accept contact request")})))))}}]),a}(l.PureComponent),C=Object(r.connect)()(w),O=n("pN+K");function k(e){var t=e.contactRequests;if(!t)return null;var n=t.filter(function(e){var t=e.board;return t&&t.name&&t.url}),r;return 0<n.length?p.a.createElement("div",null,n.map(function(e,t){return p.a.createElement("div",{key:e.id},0!==t?p.a.createElement(v.j,null):null,p.a.createElement(C,e))})):null}var I=Object(O.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(k),S=n("GGB8"),j=n.n(S),N=n("nM9s"),R=n("IaRT"),T=n.n(R),P=100,x=1e3,A=14;function L(e){var t=e.contactCount,n=e.isInContactRequestsView,r=e.onClick,o;return t||n?(o=x<t?m.a._("1000+ contact requests","messaging"):P<=t&&t<=x?m.a._("100+ contact requests","messaging"):f.h(m.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:"".concat(t)}),p.a.createElement(v.b,{dangerouslySetInlineStyle:{__style:{paddingLeft:14,paddingRight:14}},paddingY:1},p.a.createElement("div",{className:"Module ContactRequestsCount"},p.a.createElement(N.a,{className:j()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:r,text:o,type:"borderless"})))):null}var M=Object(O.b)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(L);function B(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?p.a.createElement("div",{className:"Module ContactRequestsCount"},p.a.createElement(M,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),p.a.createElement(v.b,{padding:2},p.a.createElement(v.K,{size:"sm"},m.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return p.a.createElement("div",{key:e.id},0!==t?p.a.createElement(v.j,null):null,p.a.createElement(C,e))})):null}var D=Object(O.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(B);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e}function z(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?K(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){function o(){var e,s;U(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(K(K(s=z(this,(e=W(o)).call.apply(e,[this].concat(n))))),"state",{boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1}),Y(K(K(s)),"handleInviteResponse",function(e){var t=s.props.boardInviteItem,n=t.board,r=void 0===n?{}:n,o=t.invited_user,a=void 0===o?{}:o;s.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var i={board_id:r.id,invited_user_id:a.id},c=u.a.create("BoardInviteResource",i);(e?c.callUpdate():c.callDelete()).then(function(){s.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1})})}),s}return V(o,e),H(o,[{key:"getBoardRep",value:function e(t,n){return p.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},p.a.createElement("div",{className:"Image Module boardMessageRep"},p.a.createElement("div",{className:"heightContainer"},p.a.createElement("img",{alt:t,src:n}))))}},{key:"getBoardInfo",value:function e(t,n){return p.a.createElement("a",{href:n},p.a.createElement("div",{className:t},t))}},{key:"getInviteeInfo",value:function e(t){var n=t.full_name;return p.a.createElement("div",{className:"inviterLine"},Object(f.h)(m.a._("{{ fullName }} invited you to this board"),{fullName:n}))}},{key:"getRequesterInfo",value:function e(t){var n=t.username,r=t.full_name,o=Object(f.h)(m.a._('<a href="/{{ username }}/">{{ fullName }}</a> wants to join your board'),{fullName:r,username:n});return p.a.createElement("div",{className:"requesterLine"},p.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))}},{key:"getJoinedText",value:function e(t){var n=t.username,r=t.full_name,o=Object(f.h)(m.a._('<a href="/{{ username }}/">{{ fullName }}</a> joined your board'),{fullName:r,username:n});return p.a.createElement("div",{className:"requesterLine"},p.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))}},{key:"renderPendingLayout",value:function e(t,n,r){var o=this,a=t.image_thumbnail_url,i=t.name,c=t.url,s=r?c+"invite":c;return p.a.createElement("div",{className:"pending"},p.a.createElement("div",{className:"left"},this.getBoardRep(i,a),p.a.createElement("div",{className:"description"},this.getBoardInfo(i,s),r?this.getRequesterInfo(n):this.getInviteeInfo(n))),p.a.createElement("div",{className:"actions"},p.a.createElement(N.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return o.handleInviteResponse(!1)},text:m.a._("Decline","decline board collaborator invite or request")}),p.a.createElement(N.a,{className:j()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return o.handleInviteResponse(!0)},text:m.a._("Accept","accept board invite")})))}},{key:"renderCompletedLayout",value:function e(t,n,r){var o=t.image_thumbnail_url,a=t.name,i=t.url;return p.a.createElement("div",{className:"success displayed"},p.a.createElement("div",{className:"left"},this.getBoardRep(a,o),p.a.createElement("div",{className:"description"},this.getBoardInfo(a,i),p.a.createElement("div",{className:"inviterLine"},r?this.getJoinedText(n):m.a._("You joined this board","board invites")))))}},{key:"render",value:function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,r=t.invited_by_user,o=t.invited_user,a=r.id===o.id;return p.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,r,a):this.renderCompletedLayout(n,r,a))}}]),o}(l.Component),J=n("JyNp"),X=n("MQ2h"),Q=n.n(X),$=n("suNN");function ee(e){return re(e)||ne(e)||te()}function te(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ne(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function re(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var oe=function e(t,n){return t.created_at&&n.created_at?new Date(t.created_at)>new Date(n.created_at)?-1:1:0};function ae(e){var t=e.boardJoinRequests,n=e.boardInvites,r=e.contactRequests,o=e.onClick,a=e.showAllRequests;if(!t.isLoaded&&!t.isLoaded&&!t.isLoaded)return null;var i=ee(t.data||[]).concat(ee(n.data||[]),ee(r.data||[]));i.sort(oe);var c=!a||2<i.length,s=c?i.slice(0,2):i;return l.createElement(l.Fragment,null,c&&l.createElement(v.b,{width:"100%",paddingX:2,paddingY:3},l.createElement(v.c,{text:Object($.b)(m.a._("See all {{ n }} requests"),{n:i.length}).join(""),size:"sm",onClick:o})),s.map(function(e){var t=e.type,n=e.id;return"contactrequest"===t?l.createElement(C,Object.assign({},e,{key:n})):"collaboratorinvite"===t?l.createElement(Z,{boardInviteItem:e,key:n}):null}),l.createElement(v.j,null))}var ie=Object(X.compose)(Object(J.b)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1}),Object(J.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:function e(t){return{field_set_key:"news"}}},{allowStale:!1}),Object(J.b)({name:"BoardInvitesResource",key:"boardInvites",options:function e(t){return{current_user:!0,field_set_key:"news"}}},{allowStale:!1}))(ae),ce=n("U7FU"),se=n("tmfO"),le=n("y2lE"),ue=n("/S3G");function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function ve(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?ge(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return(ye=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e){var t=e.name,n=e.emails,r=e.users,o=e.viewerId,a=r.filter(function(e){return e.id!==o});return p.a.createElement(v.K,{color:"darkGray",size:"sm",bold:!0,truncate:!0},t||a.map(function(e){return e.first_name||e.full_name}).concat(n).join(", "))}function we(e){var t=e.message,n=e.viewerId,r=t.board,o=t.created_at,a=t.pin,i=t.sender,c=t.text,s=t.user,l=c,u=i.id===n,d=u?m.a._("You","messaging in the inbox, when the viewer(You) sends a pin, board, or profile to another user without text"):i.first_name;return l?l&&u&&(l=m.a._("You","messaging in the inbox, when the viewer(You) sends a message to another user")+": "+l):a?l=f.h(m.a._("{{ senderName }} sent a Pin","messaging"),{senderName:d}):r?l=f.h(m.a._("{{ senderName }} sent a board","messaging"),{senderName:d}):s&&(l=f.h(m.a._("{{ senderName }} sent a user profile","messaging"),{senderName:d})),p.a.createElement(v.b,{display:"flex",direction:"row",flex:"grow",alignItems:"baseline"},p.a.createElement(v.b,{marginRight:2,flex:"shrink",dangerouslySetInlineStyle:{__style:{maxWidth:"80%"}}},p.a.createElement(v.K,{color:"darkGray",size:"sm",truncate:!0},l)),p.a.createElement(v.b,{flex:"none"},p.a.createElement(v.K,{color:"gray",size:"xs",truncate:!0},m.a.getHumanizedTimesince(o,!0))))}function Ce(e){var t=e.board,n=e.pin,r=e.user,o=null;if(n){var a=n.images["236x"]||n.images["136x136"];o=p.a.createElement(v.u,{shape:"rounded",wash:!0,height:60,width:40},p.a.createElement(v.p,{alt:"",src:a.url,naturalWidth:a.width,naturalHeight:a.height,color:n.dominant_color,fit:"cover"}))}else t?o=p.a.createElement(v.u,{shape:"rounded",width:40,height:40},p.a.createElement(v.p,{alt:"",src:t.image_thumbnail_url||"",naturalWidth:60,naturalHeight:60})):r&&(o=p.a.createElement(v.b,{shape:"rounded",width:40,height:40},p.a.createElement(v.a,{name:r.full_name,src:r.image_large_url})));return o?p.a.createElement(v.b,{display:"flex",alignItems:"center",width:30,marginLeft:5,marginRight:6},p.a.createElement(v.b,{display:"block"},o)):null}var Oe=function(e){function o(){var e,i;fe(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(ge(ge(i=ve(this,(e=be(o)).call.apply(e,[this].concat(n))))),"state",{isAnimatingOut:!1,unread:i.props.data.unread||0}),_e(ge(ge(i)),"handleHideConversation",function(e){e.stopPropagation();var t=i.props,n=t.data,r=t.dispatch,o=n.id,a;u.a.create("ConversationResource",{conversation_id:o}).callDelete({showError:!1}),i.setState({isAnimatingOut:!0}),setTimeout(function(){r(Object(c.d)(o))},500),i.removeConversationChatHead(o),i.logConversationItemHide(o)}),_e(ge(ge(i)),"handleConversationItemClick",function(){var e=i.props.data;i.setState({unread:0}),e.board||i.showConversationChatHead(e),i.logConversationItemClick()}),_e(ge(ge(i)),"logConversationItemClick",function(){var e;(0,i.props.contextLog)(101,{component:54,element:277})}),_e(ge(ge(i)),"logConversationItemHide",function(e){var t;(0,i.props.contextLog)(182,{component:54,element:277,conversation_id:e})}),i}return he(o,e),me(o,[{key:"showConversationChatHead",value:function e(t){var n=this.props.dispatch,r=t.id;n(Object(c.h)(r)),n(Object(c.g)(r)),n(ue.a)}},{key:"removeConversationChatHead",value:function e(t){var n=this.props.dispatch;n(Object(c.e)(t)),n(Object(c.b)(t))}},{key:"renderItemContent",value:function e(){var t=this.state.isAnimatingOut,n=this.props,r=n.data,o=n.viewerId,a=r.board,i=r.emails,c=r.last_message,s=r.name,l=r.users,u=i||[];return p.a.createElement("div",{className:j()("ConversationListItemReact",{conversationHidden:t})},p.a.createElement(v.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:10}}},p.a.createElement(ce.a,{board:a,emails:u,users:l})),p.a.createElement(v.b,{display:"flex",width:"85%",height:"100%"},p.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column",height:"100%",paddingY:2,maxWidth:"233"},p.a.createElement(Ee,{name:s,emails:i||[],users:l,viewerId:o}),p.a.createElement(v.b,{flex:"grow",display:"flex",direction:"column"},c?p.a.createElement(we,{message:c,viewerId:o}):null)),c?p.a.createElement(Ce,c):null),0<this.state.unread?p.a.createElement("span",{className:"conversationUnreadMark"}):null,p.a.createElement(N.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:m.a._("×","close button"),type:"borderless"}))}},{key:"render",value:function e(){var t=this.props.data,n=t.board,r=t.users;return r&&r.length?n?p.a.createElement(se.b,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):p.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null}}]),o}(l.Component);function ke(e){var t;return{viewerId:e.viewer.id}}var Ie=Object(X.compose)(Object(r.connect)(ke),le.a)(Oe),Se=function e(o,t){var n=t.emails,r=t.users,a=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(t&&0!==t.length){var n=t[0];return p.a.createElement("div",{className:"contactWrapper"},p.a.createElement(ce.a,{emails:[n],size:"small"}),p.a.createElement("div",{className:"contactTextInfo"},p.a.createElement("span",{className:"contactName"},n),p.a.createElement("span",{className:"contactDescription"},m.a._("Email friend","on selected contact list"))))}},i=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=t[0].id===o?t[1]:t[0],r=n.full_name;return p.a.createElement("div",{className:"contactWrapper"},p.a.createElement(ce.a,{size:"small",users:[n]}),p.a.createElement("div",{className:"contactTextInfo"},p.a.createElement("span",{className:"contactName"},r),p.a.createElement("span",{className:"contactDescription"},m.a._("On Pinterest","info about a contact"))))};return p.a.createElement("div",null,n&&0<n.length?a(n):i(r))};function je(e){var t=e.contactItem,n=e.currentUserID,r=e.conversationItem,o=e.handleContactWrapperClick,a=e.isSelected,i=e.isUser,c=["selectionIndicator","contactCircleRep","selectionIndicator"];return p.a.createElement("a",{className:"conversationContactContainer",key:r.id,onClick:function e(){return o(i,t)},onKeyDown:function e(){},role:"button",tabIndex:0},Se(n,r),a?p.a.createElement("div",{className:c.join(" ")},p.a.createElement("em",null)):null)}je.defaultProps={isSelected:!1};var Ne=n("tZWC");function Re(e){var n=e.onClickRemove,t=e.tokenizedItems;return l.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},l.createElement("div",{className:"tokenContainer"},t.map(function(e,t){return l.createElement("div",{className:"tokenItem",key:t,style:{position:"relative"}},l.createElement(N.a,{className:"tokenRemove",onClick:function e(){return n(t)},showText:!1,text:m.a._("close conversation chathead"),type:"borderless"},l.createElement(v.b,{position:"absolute",color:"lightGray",display:"flex",alignItems:"center",justifyContent:"center",width:12,height:12,dangerouslySetInlineStyle:{__style:{borderRadius:6}}},l.createElement(v.n,{icon:"cancel",accessibilityLabel:"",size:5,color:"darkGray"}))),"string"!=typeof e?l.createElement(v.a,{size:"sm",name:e.full_name,src:e.is_default_image?void 0:e.image_large_url}):l.createElement(v.a,{size:"sm",name:e}))}),0<t.length?l.createElement(v.b,{width:5}):null),l.createElement("div",{className:"textFieldContainer"}))}function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t,n){return t&&xe(e.prototype,t),n&&xe(e,n),e}function Le(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?qe(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}function De(e,t){return(De=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe=8,He=2,ze=function(e){function o(){var e,d;Pe(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ue(qe(qe(d=Le(this,(e=Me(o)).call.apply(e,[this].concat(n))))),"state",{contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""}),Ue(qe(qe(d)),"onHandleContactClick",function(e,t){var n=d.state,r=n.selectedEmails,o=n.selectedUsers,a=e?o:r,i=e?t.id:t,c=a[i];a[i]=!c,c?d.removeTokenItem(t):d.addTokenItem(t)}),Ue(qe(qe(d)),"getSelectedEmails",function(){var t=d.state.selectedEmails;return Object.keys(t).filter(function(e){return t[e]})}),Ue(qe(qe(d)),"getSelectedUsers",function(){var t=d.state.selectedUsers;return Object.keys(t).filter(function(e){return t[e]})}),Ue(qe(qe(d)),"handleTypeaheadKeyDown",function(e){var t=d.state,n=t.contactCounter,r=t.selectedEmails,o=t.selectedUsers,a=t.tokenizedItems,i=t.value;if(8===e.keyCode&&n&&!i){var c=a.pop(),s,l,u;(!!c.id?o:r)[c.id||c]=!1,d.setState({contactCounter:n-1,tokenizedItems:a})}}),Ue(qe(qe(d)),"handleInviteItemClick",function(e,t){var n=d.state,r=n.selectedUsers,o=n.selectedEmails,a=t?r:o,i=e.id||e;a[i]||(a[i]=!0,d.addTokenItem(e))}),Ue(qe(qe(d)),"handleRemoveItem",function(e){var t=d.state.tokenizedItems[e];d.removeTokenItem(t)}),Ue(qe(qe(d)),"handleSendMessage",function(){var e=d.getSelectedEmails(),t=d.getSelectedUsers(),n=d.props.dispatch,r;u.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data;n(Object(c.c)(t)),n(Object(c.h)(t.id)),n(Object(c.g)(t.id))})}),Ue(qe(qe(d)),"addTokenItem",function(e){var t=d.state,n=t.contactCounter,r=t.tokenizedItems;d.setState({contactCounter:n+1,tokenizedItems:r.concat([e]),value:""})}),Ue(qe(qe(d)),"removeTokenItem",function(t){var e=d.state,n=e.contactCounter,r=e.tokenizedItems,o=e.selectedUsers,a=e.selectedEmails,i,c,s;(!!t.id?o:a)[t.id||t]=!1,t.id?d.setState({contactCounter:n-1,tokenizedItems:r.filter(function(e){return e.id!==t.id})}):d.setState({contactCounter:n-1,tokenizedItems:(r||[]).filter(function(e){return e!==t})})}),Ue(qe(qe(d)),"renderSendMessageButton",function(){return p.a.createElement(N.a,{className:"sendNewMessageButton",hasText:!0,onClick:d.handleSendMessage,showText:!0,text:m.a._("Next","open the new chat"),type:"borderless"})}),Ue(qe(qe(d)),"renderCancelMessageButton",function(){var e=d.props.handleCancelNewMessageClick;return p.a.createElement(N.a,{className:"cancelNewMessageView cancelButton",hasText:!0,onClick:e,showText:!0,text:m.a._("Cancel","cancel new message view"),type:"borderless"})}),d}return Be(o,e),Ae(o,[{key:"getContactItem",value:function e(t,n,r){var o=t.emails,a=t.users,i;return r&&a?a[0].id===n?a[1]:a[0]:o[0]}},{key:"render",value:function e(){var s=this,t=this.props,n=t.conversationItems,l=t.viewerId,r=this.state,o=r.contactCounter,u=r.selectedUsers,d=r.selectedEmails,a=r.value,f=new Set,i=n.map(function(e,t){var n=e.emails,r=e.users;n||(n=[]),r||(r=[]);var o=r.length+n.length;if(0<o&&o<=2){var a=0===n.length,i=s.getContactItem(e,l,a);if(i){var c=i.id||i;if(!f.has(c))return f.add(c),p.a.createElement(je,{className:"conversationContactContainer",contactItem:i,conversationItem:e,currentUserID:l,handleContactWrapperClick:s.onHandleContactClick,isSelected:u[c]||d[c],isUser:a,key:c+"-".concat(t)})}}return null});return p.a.createElement("div",null,p.a.createElement(v.b,{display:"flex",justifyContent:"between",padding:3},p.a.createElement(v.K,{size:"sm",color:"gray"},m.a._("New message","conversations")),0<o?this.renderSendMessageButton():this.renderCancelMessageButton()),p.a.createElement(v.b,{color:"lightGray",display:"flex",padding:3},p.a.createElement(v.b,{display:"flex",alignItems:"center",marginRight:2},p.a.createElement(v.K,{size:"sm"},m.a._("To:","new message"))),p.a.createElement(v.b,{display:"flex",position:"relative",flex:"grow"},p.a.createElement(Re,{tokenizedItems:this.state.tokenizedItems,onClickRemove:this.handleRemoveItem}),p.a.createElement(Ne.a,{changeOnTextHover:!1,className:"reactNewMessageTypeahead",onChange:function e(t){return s.setState({value:t})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),a?null:p.a.createElement("div",{className:"contactsContainer"},i))}}]),o}(l.Component),We=function e(t){var n;return{viewerId:t.viewer.id}},Ve=Object(X.compose)(Object(r.connect)(We))(ze),Ge=n("FfPm");function Ke(e){var t=e.boardInvites,n=e.boardJoinRequests;return t||n?p.a.createElement("div",null,n?n.map(function(e){return p.a.createElement(v.b,{key:e.id},p.a.createElement(Z,{boardInviteItem:e}),p.a.createElement(v.j,null))}):null,t?t.map(function(e){return p.a.createElement(v.b,{key:e.id},p.a.createElement(Z,{boardInviteItem:e}),p.a.createElement(v.j,null))}):null):null}var Ye=Object(X.compose)(Object(O.b)({name:"BoardOwnerCollaboratorJoinRequestsResource",key:"boardJoinRequests",options:{field_set_key:"news"}},{allowStale:!1}),Object(O.b)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1}))(Ke),Ze=n("nX0T"),Je=n("6oz1"),Xe=n("woYD");function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tt(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),e}function nt(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?it(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var st=500,lt="existingConversationsView",ut="newMessageView",dt="contactRequestsView",ft="enabled_top_left",pt="enabled_on_the_bottom",mt="enabled_employees",vt=function(e){function a(){var e,n;$e(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return ct(it(it(n=nt(this,(e=rt(a)).call.apply(e,[this].concat(r))))),"state",{currentView:lt,hoverColor:"transparent"}),ct(it(it(n)),"handleCancelSecondaryView",function(){n.setState({currentView:lt})}),ct(it(it(n)),"handleNewMessageButtonClick",function(){n.setState({currentView:ut}),n.logNewMessageButtonClick()}),ct(it(it(n)),"handleViewContactRequestsClick",function(){n.setState({currentView:dt})}),ct(it(it(n)),"handleScroll",function(){var e,t;n.props.isFetching||(n._container&&n._container.scrollHeight-n._container.scrollTop-n._container.clientHeight)<st&&n.fetchMore()}),ct(it(it(n)),"handleMouseHoverSVG",function(){n.setState({hoverColor:"rgba(0, 0, 0, 0.06)"})}),ct(it(it(n)),"handleMouseLeaveSVG",function(){n.setState({hoverColor:"transparent"})}),ct(it(it(n)),"logNewMessageButtonClick",function(){Object(Xe.a)(101,{component:54,element:275})}),ct(it(it(n)),"handleDismiss",function(){var e=n.props.onDismiss;Ge.default.increment("web_messaging.close_from_conversation_panel"),e()}),n}return ot(a,e),tt(a,[{key:"componentDidMount",value:function e(){var t;this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll),Object(Xe.a)(7161,{})}},{key:"componentWillUnmount",value:function e(){this._container.removeEventListener("scroll",this.handleScroll)}},{key:"fetchMore",value:function e(){var t=this.props,n=t.isAtEnd,r=t.isFetching,o=t.fetchMoreData,a=t.isFullAuth;!r&&a&&(n?this._container.removeEventListener("scroll",this.handleScroll):o())}},{key:"renderNewMessageView",value:function e(){var t=this.props.conversations,n=void 0===t?[]:t;return p.a.createElement("div",{className:"newMessageContainer"},p.a.createElement(Ve,{conversationItems:n,handleCancelNewMessageClick:this.handleCancelSecondaryView}))}},{key:"renderContactRequestsView",value:function e(){var t;return this.props.inContactRequestsInboxExperiment?p.a.createElement(ie,{showAllRequests:!0}):p.a.createElement("div",{className:"contactRequestsContainer"},p.a.createElement(D,{handleCancelViewContactRequests:this.handleCancelSecondaryView}))}},{key:"renderEmptyMessagesNewMessageUpsell",value:function e(){return p.a.createElement("div",{className:"EmptyConversations Module"},p.a.createElement("div",{className:"icon"}),p.a.createElement("div",{className:"intro"},p.a.createElement("div",null,m.a._("Send messages to your friends!")),p.a.createElement("div",null,m.a._("Plan projects, swap ideas and share your best discoveries."))))}},{key:"renderExistingConversationsView",value:function e(){var a=this,t=this.props,n=t.conversations,i=void 0===n?[]:n,c=t.isAtEnd,s=t.inContactRequestsInboxExperiment;return p.a.createElement(Je.b,{name:"web_compose_message_button_position"},function(e){var t=e.group,n=t.startsWith("enabled"),r=t.startsWith(pt)||t.startsWith(mt),o=t.startsWith(ft);return p.a.createElement("div",{className:"existingConversationsContainer"},p.a.createElement(v.b,{position:"relative"},p.a.createElement(v.b,{position:"absolute",right:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},n?p.a.createElement(v.o,{onClick:a.handleDismiss,icon:"cancel",iconColor:"gray",size:"sm",accessibilityLabel:m.a._("closeConversationPanel","accessibility label for cancel icon button")}):p.a.createElement(v.o,{onClick:a.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:m.a._("composeNewMessage","accessibility label for compose icon button")})),o&&p.a.createElement(v.b,{position:"absolute",left:!0,dangerouslySetInlineStyle:{__style:{padding:10}}},p.a.createElement(v.o,{onClick:a.handleNewMessageButtonClick,icon:"compose",iconColor:"gray",size:"sm",accessibilityLabel:m.a._("composeNewMessage","accessibility label for compose button")})),p.a.createElement(v.b,{paddingY:4,dangerouslySetInlineStyle:{__style:{paddingRight:"25%",paddingLeft:"25%"}}},p.a.createElement(v.K,{bold:!0,size:"md",align:"center"},m.a._("Messages","header text for conversations dropdown")))),s?p.a.createElement(ie,{onClick:a.handleViewContactRequestsClick}):p.a.createElement("div",{className:"viewContactRequestsButtonContainer"},p.a.createElement(M,{onClick:a.handleViewContactRequestsClick})),p.a.createElement("div",{className:"existingConversationItemsWrapper"},!s&&p.a.createElement(l.Fragment,null,p.a.createElement("div",{className:"boardInvitesContainer"},p.a.createElement(Ye,null)),p.a.createElement("div",{className:"boardInviteContactRequestsContainer"},p.a.createElement(I,null))),p.a.createElement(v.b,{position:"relative"},p.a.createElement(v.b,{position:"absolute",width:"100%",top:!0,marginBottom:12},p.a.createElement("ul",{className:"conversationItems"},0===i.length&&c?a.renderEmptyMessagesNewMessageUpsell():i.map(function(e,t){return p.a.createElement("li",{className:"conversationItemWrapper",key:e.id},p.a.createElement(Ie,{data:e}),t<i.length-1?p.a.createElement(v.j,null):null)})))),r&&p.a.createElement(v.b,{bottom:!0,width:"100%",position:"absolute",dangerouslySetInlineStyle:{__style:{padding:14,background:"white"}}},p.a.createElement(v.c,{text:m.a._("New message","compose button on the conversation panel"),onClick:a.handleNewMessageButtonClick,size:"sm",accessibilityLabel:m.a._("composeNewMessage","accessibility label for compose button")}))))})}},{key:"renderMessageView",value:function e(){switch(this.state.currentView){case lt:return this.renderExistingConversationsView();case ut:return this.renderNewMessageView();case dt:return this.renderContactRequestsView()}}},{key:"render",value:function e(){var n=this;return p.a.createElement(Ze.a,{view:42,viewParameter:203},p.a.createElement("div",{className:"conversationPanel",ref:function e(t){n._container=t}},this.renderMessageView()))}}]),a}(l.Component);function bt(e){return e.sort(function(e,t){return new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)}),e}var ht=function e(t){return Object.keys(t).map(function(e){return t[e]})},yt=function e(t){var n=t.conversations,r=t.viewer;return{conversations:bt(ht(n.data)),isFullAuth:r.isAuth&&!r.isLimitedLogin}},gt=t.a=Object(X.compose)(Object(r.connect)(yt),Object(O.b)({name:"ConversationsResource",key:"conversationsResource"},{allowStale:!1}))(vt)},nM9s:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var E=n("d6ZO"),r=n.n(E),i=n("FHH+"),o=n("GGB8"),w=n.n(o),C=n("cy6F");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?m(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function a(){var e,t;c(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(m(m(t=u(this,(e=d(a)).call.apply(e,[this].concat(r))))),"handleClick",function(e){e&&e.preventDefault(),t.props.loading||(t.props.src?Object(i.a)(t.props.src):t.props.onClick&&t.props.onClick(e),t.props.stopPropagation&&e.stopPropagation())}),t}return f(a,e),l(a,[{key:"render",value:function e(){var t=this.props,n=t.accessibilityLabel,r=t.children,o=t.disabled,a=t.hasIcon,i=t.htmlType,c=t.id,s=t.itemProp,l=t.large,u=t.loading,d=t.onMouseDown,f=t.onMouseEnter,p=t.onMouseLeave,m=t.rel,v=t.rounded,b=t.showText,h=t.style,y=t.text,g=t.type,_=w()(this.props.className,{Button:"plain"!==g,Module:"plain"!==g,btn:"borderless"!==g&&"plain"!==g,hasIcon:a,hasText:b,rounded:!0===v,leftRounded:"left"===v,rightRounded:"right"===v,borderless:"borderless"===g,primary:"primary"===g,disabled:o,large:l});return E.createElement("button",{"aria-label":n||null,className:_,disabled:o,id:c,itemProp:s,onClick:this.handleClick,onMouseDown:d,onMouseEnter:f,onMouseLeave:p,rel:m,style:h,type:i},u?E.createElement(C.a,{size:"small"}):null,r,a?E.createElement("em",null):null,E.createElement("span",{className:b?"buttonText":"accessibilityText"},y))}}]),a}(E.Component);v(b,"defaultProps",{disabled:!1,htmlType:"button",large:!1,rounded:!0,showText:!0,type:"default"})},"pN+K":function(e,t,n){"use strict";t.a=N,t.c=L;var u=n("d6ZO"),r=n.n(u),o=n("DUIN"),a=n("lJK6"),v=n("FfPm"),i=n("IaRT"),c=n.n(i),s=n("S+Qs");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(e,t){if(null==e)return{};var n=f(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],0<=t.indexOf(o)||(n[o]=e[o]);return n}function p(e){return h(e)||b(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function b(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){S(t,e,n[e])})}return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function w(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?I(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function e(t,n){return JSON.stringify(t)===JSON.stringify(n)};function N(e,t){return Object(a.a)("function"==typeof e?e(t):e||{})}var R=function e(t){var m={};return function(c){return function(e,l){var t=e.resources,r=t.fetching,u=t.data,n=c.some(function(e){var t=e.name,n=e.options;return r[t]&&r[t][N(n,l)]}),d={},f,p=[];c.forEach(function(e){var t=e.name,n=e.options,r=e.key;if(u[t]){var o=N(n,l);if(m[t]||(o in u[t]?v.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"success",v:1}):Object.keys(u[t]).length?v.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"error",v:1}):v.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(u[t]).length,level:"warn",v:1})),m[t]=!0,u[t][o]){var a=u[t][o],i=a.data,c=a.nextBookmark,s=a.error;d[r]=i,p.push(c),s&&(f=s)}}else v.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var o=c.every(function(e){var t=e.key;return void 0!==d[t]}),a,i;return{resourceLoaded:o,isAtEnd:o&&!n&&p.every(function(e){return"-end-"===e}),isFetching:n,nextBookmark:p[0],resourceData:d,error:f}}}},T=function e(i){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(l){var e,t;return t=e=function(e){function a(){var e,t;g(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(I(I(t=w(this,(e=C(a)).call.apply(e,[this].concat(r))))),"loadData",function(o){var a=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(s.a)(n,r,void 0,void 0,a.traceLoggerHandlerName))})}),S(I(I(t)),"loadMoreData",function(o){var a=c;i.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(s.d)(n,r,void 0,void 0,a.traceLoggerHandlerName))})}),S(I(I(t)),"resourcesHash",JSON.stringify(i.map(function(e){return y({},e,{options:N(e.options,t.props)})}))),t}return O(a,e),E(a,[{key:"componentDidMount",value:function e(){!1!==c.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function e(t){var n=p(Object.keys(this.props)).concat(p(Object.keys(t))),r=!0,o=!1,a=void 0;try{for(var i=n[Symbol.iterator](),c;!(r=(c=i.next()).done);r=!0){var s=c.value;if("resourceData"===s){if(!j(this.props.resourceData,t.resourceData))return!0}else if(this.props[s]!==t[s])return!0}}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function e(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(i.map(function(e){return y({},e,{options:N(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function e(){var t=this,n=this.props,r=n.error,o=n.isAtEnd,a=n.isFetching,i=n.resourceData,c=n.resourceLoaded,s=d(n,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete s.onResourceError,delete s.onResourceLoaded,u.createElement(l,Object.assign({},i,s,{error:r,fetchMoreData:function e(){return t.loadMoreData(t.props)},isAtEnd:o,isFetching:a,refreshData:function e(){return t.loadData(t.props)},resourceLoaded:c}))}}]),a}(u.Component),S(e,"WrappedComponent",l),S(e,"displayName",1===i.length?i[0].name:"".concat(i.length," resources")),t}},P=function e(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t={name:n.name,options:n.options||{},key:n.key||"data"};return Object(o.connect)(R(e)([t]))(T([t],r)(e))}},x=P;t.b=P;var A=function e(t){var a=t.name,i=t.options;return function(e,t){var n=e.resources.data;if(n[a]){var r=N(i,t),o;if(n[a][r])return{data:n[a][r].data}}return{data:null}}};function L(e){var t=e.name,n=e.options;return Object(o.connect)(A({name:t,options:n||{}}))}},tZWC:function(e,t,n){"use strict";var r=n("d6ZO"),f=n.n(r),o=n("DUIN"),a=n("GGB8"),p=n.n(a),c=n("PrM5"),m=n("W/Cr"),v=n("XSNT"),i=n("IaRT"),s=n.n(i),l=n("z/23"),u=n("9bGG"),d=n("gEaE");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,
writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function a(){var e,r;h(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return k(O(O(r=_(this,(e=E(a)).call.apply(e,[this].concat(n))))),"renderInviteButton",function(e){var t=r.props.inviteQueue;if(!t)return null;var n={text:m.a._("Add","Add board collaborator invite"),color:"red",size:"sm"};return t&&t[e]&&(n.text=m.a._("Remove","Remove a board collaborator invite"),n.color="gray"),f.a.createElement(d.c,n)}),r}return w(a,e),g(a,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()}},{key:"render",value:function e(){var t=this.props,n=t.is_pinner?m.a._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?m.a._("Facebook"):"gplus_non_pinner"===t.type?m.a._("Google"):m.a._("Enter an email address");return f.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),f.a.createElement(d.b,{position:"relative"},t.send_pin_image?f.a.createElement("span",{className:"typeaheadImg"},f.a.createElement("img",{alt:"",src:t.send_pin_image})):null,f.a.createElement("p",{className:p()("typeaheadName",{hasImage:t.send_pin_image})},t.label),f.a.createElement("div",{className:"titleWrapper"},f.a.createElement("i",{className:p()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),f.a.createElement("p",{className:"title"},n)),f.a.createElement(d.b,{top:!0,right:!0,position:"absolute",width:90},this.renderInviteButton(t.id))))}}]),a}(r.Component),S=Object(u.a)(I),j=n("Svvu"),N=n("cD7N");function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=j.default.FACEBOOK,P=j.default.GPLUS,x=j.default.TWITTER,A=j.default.YAHOO;function L(e){N.a.instance().handleConnect(e,!0,{})}function M(e){var t,n=e.network,r=(R(t={},T,m.a._("Find friends from Facebook")),R(t,P,m.a._("Find friends from Google+")),R(t,x,m.a._("Find friends from Twitter")),R(t,A,m.a._("Find friends from Yahoo")),t);return f.a.createElement("div",{className:"socialConnect",role:"listitem"},f.a.createElement(d.O,{onTouch:function e(){return L(n)},fullWidth:!1},f.a.createElement("div",{className:"socialConnectItem"},f.a.createElement("div",{className:"left"},f.a.createElement("div",{className:p()("icon","socialConnect-".concat(n))},f.a.createElement("em",null))),f.a.createElement("div",{className:"right"},f.a.createElement("h4",{className:"title"},r[n])))))}var B=n("skut"),D=n("Cjb7"),q=n("5tOk"),U=n("woYD"),F=n("T0l7");function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function z(e){return G(e)||V(e)||W()}function W(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function V(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function G(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function J(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?ee(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function $(e,t){return($=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne=[j.default.FACEBOOK,j.default.TWITTER,j.default.GPLUS],re=function(e){function o(){var e,i;K(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(ee(ee(i=J(this,(e=X(o)).call.apply(e,[this].concat(n))))),"state",{networks:i.props.viewer.isAuth?i.props.viewer.socialNetwork:null,open:!1,typeaheadSuggestions:[]}),te(ee(ee(i)),"onUserInviteClick",function(e){var t=e.id,n=e.full_name,r=i.props,o=r.boardId,a=r.onInviteItemClick;o?a(Object(F.d)(o,[t]),{type:"user",userName:n}):a(e,!0)}),te(ee(ee(i)),"handleBodyClick",function(e){i._results.contains(e.target)||i.setState({open:!1})}),te(ee(ee(i)),"handleTypeaheadSuggestionsChange",function(e){var t=i.props.viewer;i.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})}),te(ee(ee(i)),"handleOnEmailInviteClick",function(){var e=i.props,t=e.boardId,n=e.onInviteItemClick,r=e.value;t?n(Object(F.c)(t,[r]),{type:"email",email:r}):n(r,!1)}),te(ee(ee(i)),"subscriber",D.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,n){i.setState({networks:Object(c.a)(n)})})),te(ee(ee(i)),"logTypeaheadInput",function(e){Object(U.a)(4113,{component:13029,element:1043,entered_query:e})}),te(ee(ee(i)),"logSearchContactItemClick",function(e){var t=i.props.value;Object(U.a)(101,{component:13029,element:1044,entered_query:t,result_index:e})}),te(ee(ee(i)),"renderResultItems",function(){var e=i.props,r=e.changeOnTextHover,o=e.inviteQueue,t=p()("Typeahead","userSelect",{open:i.state.open}),n=i.state.typeaheadSuggestions.map(function(t,n){return f.a.createElement(S,Object.assign({key:n,onClick:function e(){i.onUserInviteClick(t),i.logSearchContactItemClick(n)},onHoverEnd:function e(){return r?i.restoreTextFieldValue():null},onHoverStart:function e(){return r?i.forceTextFieldValue(t.label):null},inviteQueue:o},t))}).concat(i.getStaticItems()).map(function(e,t){return f.a.createElement("li",{key:t},e)});return f.a.createElement("div",{className:t,ref:function e(t){i._results=t},style:{overflow:"auto",zIndex:1e3}},f.a.createElement("ul",null,n))}),i}return Q(o,e),Z(o,[{key:"componentDidMount",value:function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.value;this.setState({open:0<n.length})}},{key:"componentWillUnmount",value:function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()}},{key:"getStaticItems",value:function e(){return z(this.getEmailItems()).concat(z(this.getSocialItems(this.state.networks)))}},{key:"getEmailItems",value:function e(){var t=this.props.value;return[f.a.createElement(l.a,{email:t,isValid:Object(q.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]}},{key:"getSocialItems",value:function e(t){var n;return ne.filter(function(e){return!t||!1===t[e].connected}).map(function(e,t){return f.a.createElement(M,{key:"socialConnect-".concat(e),network:e})})}},{key:"forceTextFieldValue",value:function e(t){this.previousValue=this.props.value,this.props.onChange(t)}},{key:"restoreTextFieldValue",value:function e(){this.props.onChange(this.previousValue),delete this.previousValue}},{key:"render",value:function e(){var n=this,t=this.props,r=t.boardId,o=t.className,a=t.inBoardCollaboratorInviter,i=t.onChange,c=t.onKeyDown,s=t.showInputPlaceholder,l=t.value,u=p()("Input","field",{reactCollaboratorInviterTypeaheadCustom:a},{collaboratorInviterTypeahead:!a}),d=r?{board:r}:null;return f.a.createElement(B.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:d,value:l},f.a.createElement("div",{className:p()(o,"reactSocialTypeahead")},f.a.createElement("div",{className:"TypeaheadField userSelect inputContainer"},f.a.createElement(v.a,{className:u,id:"collaboratorInviterTypeahead",onChange:function e(t){i(t),n.logTypeaheadInput(t)},onKeyDown:c,placeholder:s?m.a._("Name or email","search"):null,value:l,focused:!0})),this.renderResultItems()))}}]),o}(r.Component);te(re,"defaultProps",{changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0});var oe=function e(t){var n;return{viewer:t.viewer}},ae=t.a=Object(o.connect)(oe)(re)},"z/23":function(e,t,n){"use strict";t.a=c;var s=n("d6ZO"),r=n.n(s),o=n("GGB8"),l=n.n(o),u=n("W/Cr"),a=n("IaRT"),i=n.n(a),d=n("5tOk");function c(e){var t=e.email,n=e.isValid,r=e.onClick,o=e.showSendEmailText,a=n?s.createElement("div",{className:"icon"},t[0].toUpperCase()):s.createElement("div",{className:l()("icon","typingEmail")},s.createElement("em",null)),i=n?u.a._("Click to send!"):u.a._("Keep typing!"),c=o?Object(d.h)(u.a._("Email {{ email }}"),{email:t}):Object(d.h)(u.a._("Invite {{ email }}"),{email:t});return s.createElement("div",{className:l()("sendToEmail",{unclickable:!n})},s.createElement("a",{className:"selectableEmailItem",onClick:function e(){n&&r()},role:"button"},s.createElement("div",{className:"left"},a),s.createElement("div",{className:"right"},s.createElement("h4",{className:"title"},c),s.createElement("p",{className:"subtitle"},i))))}}});